{% extends "base.html" %}
{% block content %}
    <div class="xl:flex max-md:max-w-sm">
        <div class="md:mx-5 my-5 border-2 bg-white dark:bg-slate-600 border-black dark:border-sky-100">
            <h1 class="text-center bg-sky-50 border-b-2 border-b-black dark:border-b-sky-100 dark:bg-slate-700 ">
                Trending posts
            </h1>
            {% for post in trend_page_obj %}
                <div onclick="location.href=`{% url 'post-detail' pk=post.id %}`"
                     class="overflow-hidden cursor-pointer flex flex-row md:p-5  m-2 md:w-[450px] hover:bg-sky-50 dark:hover:bg-slate-500">
                    <img height="50px"
                         width="50px"
                         alt="pofile pic"
                         class="my-auto border-black w-[50px] h-[50px] dark:border-sky-100 border dark:bg-sky-100 rounded-full aspect-1 object-cover"
                         src="{{ post.user.profile.pic.url }}"/>
                    <div class="px-2">
                        <table >
                            <tr>
                                <td class="text-xl font-bold underline hover:text-sky-500">
                                    <a class="max-sm:py-5 z-10 block max-w-sm overflow-x-hidden"
                                       href="{% url 'post-detail' pk=post.id %}">{{ post.title }}</a>
                                </td>
                            </tr>
                            <tr>
                                <td class="text-sm p-0">
                                    {{ post.comment_count }} comments
                                    {{ post.like_count }} likes
                                    - by <a href="{% url 'profile-detail' pk=post.user.profile.id %}"
    class="sm:py-5 hover:underline hover:text-sky-500">
                                    {{ post.user.profile }}
                                </a>
                                <div class="text-sm p-0 absolute">Last Update: {{ post.updated_at | date:"SHORT_DATE_FORMAT" }}</div>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        {% endfor %}
        <div class="pt-5 pl-5">
            <span class="step-links">
                {% if trend_page_obj.has_previous %}
                    <a href="?trend_page=1&follow_page={{ follow_page_obj.number }}"><< first</a>
                    <a href="?trend_page={{ trend_page_obj.previous_page_number }}&follow_page={{ follow_page_obj.number }}"">previous</a>
                {% endif %}
                <span class="current">Page {{ trend_page_obj.number }} of {{ trend_page_obj.paginator.num_pages }}.</span>
                {% if trend_page_obj.has_next %}
                    <a href="?trend_page={{ trend_page_obj.next_page_number }}&follow_page={{ follow_page_obj.number }}"">next</a>
                    <a href="?trend_page={{ trend_page_obj.paginator.num_pages }}&follow_page={{ follow_page_obj.number }}"">last Â»;</a>
                {% endif %}
            </span>
        </div>
    </div>
    {% if has_follows %}
        <div class="md:mx-5 my-5 border-2 bg-white dark:bg-slate-600 border-black dark:border-sky-100">
            <h1 class="text-center bg-sky-50 border-b-2 border-b-black dark:border-b-sky-100 dark:bg-slate-700 ">
                Posts you follow
            </h1>
            {% for follow in follow_page_obj %}
                <div onclick="location.href=`{% url 'post-detail' pk=follow.post.id %}`"
                     class="overflow-ellipsis cursor-pointer flex flex-row md:p-5  m-2 w-auto hover:bg-sky-50  dark:hover:bg-slate-500 place-content-center">
                    <img alt="pofile pic"
                         width="50px"
                         height="50px"
                         class="my-auto border-black w-[50px] h-[50px] dark:border-sky-100 border dark:bg-sky-100 rounded-full aspect-1 object-cover"
                         src="{{ follow.post.user.profile.pic.url }}"/>
                    <div class="px-2">
                        <table >
                            <tr>
                                <td class="text-xl font-bold underline hover:text-sky-500 ">
                                    <a class="max-sm:py-5 block max-w-[15em] overflow-x-hidden"
                                       href="{% url 'post-detail' pk=follow.post.id %}">{{ follow.post.title }}</a>
                                </td>
                            </tr>
                            <tr>
                                <td class="text-sm p-0">
                                    {{ follow.post.comment_count }} comments {{ follow.post.like_count }} likes by <a href="{% url 'profile-detail' pk=follow.post.user.profile.id %}"
    class="hover:underline hover:text-sky-500">{{ follow.post.user.profile }}</a>
                                    <div class="text-sm p-0 absolute">Last Update: {{ follow.post.updated_at | date:"SHORT_DATE_FORMAT" }}</div>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            {% endfor %}
            <div class="pt-5 pl-5">
                <span class="step-links">
                    {% if follow_page_obj.has_previous %}
                        <a href="?follow_page=1&trend_page={{ follow_page_obj.number }}"">&laquo; first</a>
                        <a href="?follow_page={{ follow_page_obj.previous_page_number }}&trend_page={{ follow_page_obj.number }}">previous</a>
                    {% endif %}
                    <span class="current">Page {{ follow_page_obj.number }} of {{ follow_page_obj.paginator.num_pages }}.</span>
                    {% if follow_page_obj.has_next %}
                        <a href="?follow_page={{ follow_page_obj.next_page_number }}&trend_page={{ follow_page_obj.number }}">next</a>
                        <a href="?follow_page={{ follow_page_obj.paginator.num_pages }}&trend_page={{ follow_page_obj.number }}">last &raquo;</a>
                    {% endif %}
                </span>
            </div>
        </div>
    {% endif %}
</div>
{% endblock content %}
